var WeixinApi=(function(){function n(s,r){r=r||{};var q=function(t){WeixinJSBridge.invoke("shareTimeline",{appid:t.appId?t.appId:"",img_url:t.imgUrl,link:t.link,desc:t.title,title:t.desc,img_width:"640",img_height:"640"},function(u){switch(u.err_msg){case"share_timeline:cancel":r.cancel&&r.cancel(u);
break;case"share_timeline:confirm":case"share_timeline:ok":r.confirm&&r.confirm(u);break;case"share_timeline:fail":default:r.fail&&r.fail(u);break;}r.all&&r.all(u);
});};WeixinJSBridge.on("menu:share:timeline",function(t){if(r.async&&r.ready){window._wx_loadedCb_=r.dataLoaded||new Function();if(window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0){window._wx_loadedCb_=new Function();
}r.dataLoaded=function(u){window._wx_loadedCb_(u);q(u);};r.ready&&r.ready(t);}else{r.ready&&r.ready(t);q(s);}});}function m(s,r){r=r||{};var q=function(t){WeixinJSBridge.invoke("sendAppMessage",{appid:t.appId?t.appId:"",img_url:t.imgUrl,link:t.link,desc:t.desc,title:t.title,img_width:"640",img_height:"640"},function(u){switch(u.err_msg){case"send_app_msg:cancel":r.cancel&&r.cancel(u);
break;case"send_app_msg:confirm":case"send_app_msg:ok":r.confirm&&r.confirm(u);break;case"send_app_msg:fail":default:r.fail&&r.fail(u);break;}r.all&&r.all(u);
});};WeixinJSBridge.on("menu:share:appmessage",function(t){if(r.async&&r.ready){window._wx_loadedCb_=r.dataLoaded||new Function();if(window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0){window._wx_loadedCb_=new Function();
}r.dataLoaded=function(u){window._wx_loadedCb_(u);q(u);};r.ready&&r.ready(t);}else{r.ready&&r.ready(t);q(s);}});}function j(s,r){r=r||{};var q=function(t){WeixinJSBridge.invoke("shareWeibo",{content:t.desc,url:t.link},function(u){switch(u.err_msg){case"share_weibo:cancel":r.cancel&&r.cancel(u);
break;case"share_weibo:confirm":case"share_weibo:ok":r.confirm&&r.confirm(u);break;case"share_weibo:fail":default:r.fail&&r.fail(u);break;}r.all&&r.all(u);
});};WeixinJSBridge.on("menu:share:weibo",function(t){if(r.async&&r.ready){window._wx_loadedCb_=r.dataLoaded||new Function();if(window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0){window._wx_loadedCb_=new Function();
}r.dataLoaded=function(u){window._wx_loadedCb_(u);q(u);};r.ready&&r.ready(t);}else{r.ready&&r.ready(t);q(s);}});}function o(s,r){r=r||{};var q=function(u,t){if(u.shareTo=="timeline"){var v=t.title;
t.title=t.desc||v;t.desc=v;}u.generalShare({appid:t.appId?t.appId:"",img_url:t.imgUrl,link:t.link,desc:t.desc,title:t.title,img_width:"640",img_height:"640"},function(w){switch(w.err_msg){case"general_share:cancel":r.cancel&&r.cancel(w,u.shareTo);
break;case"general_share:confirm":case"general_share:ok":r.confirm&&r.confirm(w,u.shareTo);break;case"general_share:fail":default:r.fail&&r.fail(w,u.shareTo);
break;}r.all&&r.all(w,u.shareTo);});};WeixinJSBridge.on("menu:general:share",function(t){if(r.async&&r.ready){window._wx_loadedCb_=r.dataLoaded||new Function();
if(window._wx_loadedCb_.toString().indexOf("_wx_loadedCb_")>0){window._wx_loadedCb_=new Function();}r.dataLoaded=function(u){window._wx_loadedCb_(u);q(t,u);
};r.ready&&r.ready(t,t.shareTo);}else{r.ready&&r.ready(t,t.shareTo);q(t,s);}});}function d(q,r){r=r||{};WeixinJSBridge.invoke("addContact",{webtype:"1",username:q},function(t){var s=!t.err_msg||"add_contact:ok"==t.err_msg||"add_contact:added"==t.err_msg;
if(s){r.success&&r.success(t);}else{r.fail&&r.fail(t);}});}function b(q,r){if(!q||!r||r.length==0){return;}WeixinJSBridge.invoke("imagePreview",{current:q,urls:r});
}function c(){WeixinJSBridge.call("showOptionMenu");}function l(){WeixinJSBridge.call("hideOptionMenu");}function k(){WeixinJSBridge.call("showToolbar");
}function g(){WeixinJSBridge.call("hideToolbar");}function e(q){if(q&&typeof q=="function"){WeixinJSBridge.invoke("getNetworkType",{},function(r){q(r.err_msg);
});}}function i(q){q=q||{};WeixinJSBridge.invoke("closeWindow",{},function(r){switch(r.err_msg){case"close_window:ok":q.success&&q.success(r);break;default:q.fail&&q.fail(r);
break;}});}function a(s){if(s&&typeof s=="function"){var q=this;var r=function(){s(q);};if(typeof window.WeixinJSBridge=="undefined"){if(document.addEventListener){document.addEventListener("WeixinJSBridgeReady",r,false);
}else{if(document.attachEvent){document.attachEvent("WeixinJSBridgeReady",r);document.attachEvent("onWeixinJSBridgeReady",r);}}}else{r();}}}function p(){return/MicroMessenger/i.test(navigator.userAgent);
}function h(q){q=q||{};WeixinJSBridge.invoke("scanQRCode",{},function(r){switch(r.err_msg){case"scan_qrcode:ok":q.success&&q.success(r);break;default:q.fail&&q.fail(r);
break;}});}function f(q){window.onerror=function(u,s,r,t){if(typeof q==="function"){q({message:u,script:s,line:r,column:t});}else{var v=[];v.push("额，代码有错。。。");
v.push("\n错误信息：",u);v.push("\n出错文件：",s);v.push("\n出错位置：",r+"行，"+t+"列");alert(v.join(""));}};}return{version:"2.4",enableDebugMode:f,ready:a,shareToTimeline:n,shareToWeibo:j,shareToFriend:m,generalShare:o,addContact:d,showOptionMenu:c,hideOptionMenu:l,showToolbar:k,hideToolbar:g,getNetworkType:e,imagePreview:b,closeWindow:i,openInWeixin:p,scanQRCode:h};
})();